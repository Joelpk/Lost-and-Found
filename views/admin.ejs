<%- include('partials/header.ejs') %>

<section class="container py-5 admin-container">

  <!-- Title Section -->
  <div class="d-flex justify-content-between align-items-center mb-4">
    <div>
      <h1 class="admin-title fw-bold mb-1">Admin Dashboard</h1>
      <p class="admin-subtitle text-muted mb-0">
        Review and manage all lost &amp; found submissions.
      </p>
    </div>

    <div class="text-end">
      <small class="text-muted">
        Total reports: <span class="fw-semibold"><%= reports.length %></span>

      </small>
    </div>
  </div>

  <!-- Table -->
  <div class="table-responsive shadow-sm rounded-4 border bg-white">
    <table class="table table-hover align-middle mb-0">
      <thead class="table-light">
        <tr>
          <th>#</th>
          <th>User</th>
          <th>Contact</th>
          <th>Type</th>
          <th>Item</th>
          <th>Category</th>
          <th>Location</th>
          <th>Date</th>
          <th>Status</th>
          <th>Description</th>
        </tr>
      </thead>

      
      <tbody>
  <% reports.forEach((report, index) => { %>
    <tr>
      <td><%= index + 1 %></td>

      <td>
        <div class="fw-semibold"><%= report.full_name %></div>
        <small class="text-muted">ID: <%= report.id %></small>
      </td>

      <td>
        <% if (report.email) { %>
          <small class="d-block"><%= report.email %></small>
        <% } %>
        <% if (report.phone) { %>
          <small class="d-block"><%= report.phone %></small>
        <% } %>
      </td>

      <td>
        <% if (report.type === "lost") { %>
          <span class="badge text-bg-danger">Lost</span>
        <% } else { %>
          <span class="badge text-bg-success">Found</span>
        <% } %>
      </td>

      <td class="fw-semibold"><%= report.item_name %></td>
      <td><%= report.category || "-" %></td>
      <td><%= report.location || "-" %></td>
      <td><%= report.event_date || "-" %></td>

      <td>
        <span class="badge
          <%= report.status === "open" ? "text-bg-primary" :
              report.status === "matched" ? "text-bg-warning text-dark" :
              report.status === "returned" ? "text-bg-success" :
              "text-bg-secondary" %>">
          <%= report.status %>
        </span>
      </td>

      <td style="max-width: 260px;">
        <small class="text-muted d-block text-truncate"
               title="<%= report.description %>">
          <%= report.description || "-" %>
        </small>
      </td>
    </tr>
  <% }) %>
</tbody>




    </table>
  </div>
</section>

<%- include('partials/footer.ejs') %>
